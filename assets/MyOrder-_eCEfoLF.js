import{m as g,_ as h,o as l,c,b as s,F as y,g as F,f as b,q as w,t as r,p as D,e as x,i as I,j as k,r as d,a as u}from"./index-8F6aToGJ.js";import{o as m}from"./orders-lXffGQ9c.js";import{n as A}from"./NextRoom-W5r0cofZ.js";import"./RoomService-vU1NB5iz.js";import"./bootstrap.esm-H_Gc164B.js";const B={name:"HistoryOrder",mixins:[g],props:{list:{type:Array,default:()=>[],required:!0}},data(){return{historyList:[],showBtn:!0}},watch:{list(e){this.historyList=e.slice(0,2)}},methods:{showMore(){this.showBtn=!1,this.historyList=this.list},getDiff(e,o){return(new Date(o).getTime()-new Date(e).getTime())/1e3/60/60/24},getPrice(e){const a=this.getDiff(e.checkInDate,e.checkOutDate)*e.roomId.price;return this.moneyFormat(a)}}},_=e=>(D("data-v-37e59f14"),e=e(),x(),e),O={class:"d-flex flex-column"},L=_(()=>s("h2",{class:"fs-6 fs-lg-5 fw-bold mb-0"},"歷史訂單",-1)),$={class:"historyList"},T=["src","alt"],v={class:"d-flex flex-column text-neutral-80 roomInfo"},N={class:"fs-lg-0 fs-small"},S={class:"fs-lg-6 fs-small fw-bold"},E={class:"fs-lg-0 fs-small mb-2"},M={class:"fs-lg-0 fs-small"},C={class:"sub-title sub-title-primary mb-2 fw-medium"},H={class:"sub-title sub-title-neutral-60 fw-medium"},V={class:"fs-lg-0 fs-small fw-bold mb-0"},R=_(()=>s("span",{class:"material-symbols-outlined"}," expand_more ",-1));function j(e,o,a,f,i,n){return l(),c("div",O,[L,s("ul",$,[(l(!0),c(y,null,F(i.historyList.filter(t=>t.status!==-1),t=>(l(),c("li",{class:"py-5 py-lg-7 d-flex flex-column flex-lg-row gap-5 align-items-start fw-medium border-bottom border-2 border-neutral-40",key:t._id},[s("img",{src:t.roomId.imageUrl,class:"img-fluid rounded-start rounded-3",alt:t.roomId.name,width:"120",height:"80"},null,8,T),s("article",v,[s("p",N,"預訂參考編號： "+r(t._id),1),s("p",S,r(t.roomId.name),1),s("p",E," 住宿天數： "+r(n.getDiff(t.checkInDate,t.checkOutDate))+" 晚 ",1),s("p",M,"住宿人數： "+r(t.peopleNum)+" 位",1),s("p",C," 入住："+r(e.getDate(t.checkInDate)),1),s("p",H," 退房："+r(e.getDate(t.checkOutDate)),1),s("p",V,"NT$"+r(n.getPrice(t)),1)])]))),128))]),i.showBtn?(l(),c("button",{key:0,type:"button",class:"btn btn-outline-primary d-flex align-items-center justify-content-center gap-1 py-3 px-6 rounded-3",onClick:o[0]||(o[0]=(...t)=>n.showMore&&n.showMore(...t))},[b(" 查看更多 "),R])):w("",!0)])}const q=h(B,[["render",j],["__scopeId","data-v-37e59f14"]]),P={name:"MyOrder",components:{nextRoom:A,HistoryOrder:q},async mounted(){this.getOrders()},computed:{...I(m,["orderList"]),nextOrder(){const e=[...this.orderList].sort((o,a)=>new Date(o.checkInDate).getTime()-new Date(a.checkInDate).getTime()).filter(o=>new Date(o.checkInDate).getTime()>=new Date().getTime()&&o.status!==-1);return e.length?e[0]:{}}},methods:{...k(m,["getOrders"])}},U={class:"bg-neutral-bg"},z={class:"row g-5 g-lg-7"},G={class:"col-12 col-lg-7 ps-lg-0"},J={class:"col-12 col-lg-5 pe-lg-0"},K={class:"bg-white p-5 p-lg-7 rounded-6"};function Q(e,o,a,f,i,n){const t=d("nextRoom"),p=d("HistoryOrder");return l(),c("main",U,[s("div",z,[s("div",G,[u(t,{roomInfo:n.nextOrder},null,8,["roomInfo"])]),s("div",J,[s("section",K,[u(p,{list:e.orderList},null,8,["list"])])])])])}const te=h(P,[["render",Q]]);export{te as default};
